---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

import starpodConfig from '../../starpod.config';

const { hosts } = starpodConfig;
const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/img/people/*.{jpeg,jpg,png}'
);
---

<div
  class="bg-light-card dark:bg-dark-card mx-2 mt-2 rounded-lg px-4 pt-12 pb-12 sm:px-6 md:px-4 lg:mx-0 lg:mt-0 lg:px-16 lg:pb-0"
>
  <h3 class="section-heading pb-6">Hosted By</h3>

  {
    hosts.map((host) => {
      const imagePath = `/src/img/people/${host.img}`;
      const hasImage = host.img && images[imagePath];

      return (
        <div class="mb-4 flex items-center">
          {hasImage ? (
            <Image
              class="mr-4 h-12 w-12 rounded-lg"
              height={48}
              src={images[imagePath]()}
              width={48}
              alt=""
              loading="lazy"
            />
          ) : (
            <div class="mr-4 h-12 w-12 rounded-lg bg-gray-300 dark:bg-gray-600" />
          )}
          {host.name}
        </div>
      );
    })
  }
</div>
